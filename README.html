<!doctype html>
<html>
 <head>
  <title>IntelliJ Markdown Preview</title>
  <style>/* Reworked by IntelliJ Team The MIT License (MIT) Copyright (c) JetBrains Adapted from https://github.com/sindresorhus/github-markdown-css The MIT License (MIT) Copyright (c) Sindre Sorhus &lt;sindresorhus@gmail.com&gt; (sindresorhus.com) Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. */ @font-face { font-family: octicons-anchor; src: url(data:font/woff;charset=utf-8;base64,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) format('woff'); } body { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: Helvetica, Arial, freesans, sans-serif; font-size: 14px; line-height: 1.6; word-wrap: break-word; margin: 0 2em; } strong { font-weight: bold; } img { border: 0; } input { color: inherit; font: inherit; margin: 0; line-height: normal; } html input[disabled] { cursor: default; } input[type="checkbox"] { box-sizing: border-box; padding: 0; } body * { box-sizing: border-box; } input { font: 13px/1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; } a { text-decoration: none; } a:hover, a:active { text-decoration: underline; } hr { height: 1px; padding: 0; margin: 20px 0; border: 0 none; } hr:before { display: table; content: ""; } hr:after { display: table; clear: both; content: ""; } blockquote { margin: 0; } ul, ol { padding: 0; margin-top: 0; margin-bottom: 0; } ol ol, ul ol { list-style-type: lower-roman; } ul ul ol, ul ol ol, ol ul ol, ol ol ol { list-style-type: lower-alpha; } dd { margin-left: 0; } .octicon { font: normal normal normal 16px/1 octicons-anchor; display: inline-block; text-decoration: none; text-rendering: auto; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .octicon-link:before { content: '\f05c'; } .markdown-body &gt; *:first-child { margin-top: 0 !important; } .markdown-body &gt; *:last-child { margin-bottom: 0 !important; } .anchor { position: absolute; top: 0; left: 0; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; } .anchor:focus { outline: none; } h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; } h1 .octicon-link, h2 .octicon-link, h3 .octicon-link, h4 .octicon-link, h5 .octicon-link, h6 .octicon-link { display: none; color: #000; vertical-align: middle; } h1:hover .anchor, h2:hover .anchor, h3:hover .anchor, h4:hover .anchor, h5:hover .anchor, h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; } h1:hover .anchor .octicon-link, h2:hover .anchor .octicon-link, h3:hover .anchor .octicon-link, h4:hover .anchor .octicon-link, h5:hover .anchor .octicon-link, h6:hover .anchor .octicon-link { display: inline-block; } h1 { font-size: 2.2em; padding-top: 0.6em; } h1 .anchor { line-height: 1; } h2 { font-size: 1.8em; line-height: 1.2; padding-top: 0.6em; } h2 .anchor { line-height: 1.2; } h3 { font-size: 1.3em; line-height: 1; padding-top: 0.6em; } h3 .anchor { line-height: 1.2; } h4 { font-size: 1em; } h4 .anchor { line-height: 1.2; } h5 { font-size: 1em; } h5 .anchor { line-height: 1.1; } h6 { font-size: 1em; } h6 .anchor { line-height: 1.1; } p, blockquote, ul, ol, dl, table, pre { margin-top: 16px; margin-bottom: 16px; } ul, ol { padding-left: 2em; } ul ul, ul ol, ol ol, ol ul { margin-top: 0; margin-bottom: 0; } li &gt; p { margin-top: 0; margin-bottom: 0; } dl { padding: 0; } dl dt { padding: 0; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; } dl dd { padding: 0 16px; margin-bottom: 16px; } blockquote { padding: 10px 10px 10px 16px; border-left: 2px solid; border-radius: 0 3px 3px 0; } blockquote &gt; :first-child { margin-top: 0; } blockquote &gt; :last-child { margin-bottom: 0; } table { display: block; width: 100%; overflow: auto; word-break: normal; border-collapse: collapse; border-spacing: 0; font-size: 1em; } table th { font-weight: bold; } table th, table td { padding: 6px 13px; background: transparent; } table tr { border-top: 1px solid; } img { max-width: 100%; box-sizing: border-box; } code { font: 0.9em "JetBrains Mono", Consolas, "Liberation Mono", Menlo, Courier, monospace; padding: 0.2em 0.4em; margin: 2px; border-radius: 3px; } pre &gt; code { padding: 0; margin: 0; font-size: 100%; word-break: normal; white-space: pre; background: transparent; border: 0; } .highlight { margin-bottom: 16px; } .highlight pre, pre { font: 0.85em "JetBrains Mono", Consolas, "Liberation Mono", Menlo, Courier, monospace; padding: 16px; overflow: auto; line-height: 1.45; border-radius: 3px; } pre code { display: inline; max-width: initial; padding: 0; margin: 0; overflow: initial; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0; } pre code:before, pre code:after { content: normal; } kbd { font: 0.9em "JetBrains Mono", Consolas, "Liberation Mono", Menlo, Courier, monospace; padding: 0.2em 0.4em; margin: 2px; border-radius: 3px; } .task-list-item { list-style-type: none; } .task-list-item + .task-list-item { margin-top: 3px; } .task-list-item input { margin: 0 0.35em 0.25em -0.6em; vertical-align: middle; } :checked + .radio-label { z-index: 1; position: relative; } span.user-del { text-decoration: line-through; } ::-webkit-scrollbar { width: 6px; height: 6px; } ::-webkit-scrollbar-thumb { -webkit-border-radius: 10px; } ::-webkit-scrollbar-track:vertical { -webkit-box-shadow: -1px 0 0 #ededed; } ::-webkit-scrollbar-track { background-color: transparent; } ::-webkit-scrollbar { width: 6px; }</style>
  <style>body { background-color: rgba(43, 43, 43, 255.0); font-size: 14px !important; } body, p, blockquote, ul, ol, dl, table, pre, code, tr { color: rgba(169, 183, 198, 255.0); } a { color: rgba(88, 157, 246, 255.0); } table td, table th { border: 1px solid rgba(81, 81, 81, 255.0); } hr { background-color: rgba(81, 81, 81, 255.0); } kbd, tr { border: 1px solid rgba(81, 81, 81, 255.0); } h6 { color: rgba(120, 120, 120, 255.0); } blockquote { border-left: 2px solid rgba(88, 157, 246, 0.4); } ::-webkit-scrollbar-thumb { background-color: java.awt.Color[r=166,g=166,b=166]; } blockquote, code, pre { background-color: rgba(212, 222, 231, 0.09803921568627451); }</style>
  <style>/* Copyright 2000-2021 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. */ .code-fence-highlighter-copy-button { display: flex; position: absolute; float: left; margin-left: -1em; margin-top: -1em; } .code-fence-highlighter-copy-button-icon { max-width: 1em; } .code-fence:hover .code-fence-highlighter-copy-button-icon { /*noinspection CssUnknownTarget*/ content: url("copy-button-copy-icon.png"); } .code-fence:hover .code-fence-highlighter-copy-button:hover .code-fence-highlighter-copy-button-icon { /*noinspection CssUnknownTarget*/ content: url("copy-button-copy-icon-hovered.png"); cursor: pointer; }</style>
  <style>/* Copyright 2000-2021 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. */ .run-icon &gt; img { max-width: 1em; vertical-align: text-top; margin-right: 0.3em; } .code-block { position: absolute; left: 1em; } .hidden { display: none; }</style>
 </head>
 <body>
  <div md-src-pos="0..3788">
   <hr>
   <p md-src-pos="4..90"><span md-src-pos="4..9">title</span>: "<span md-src-pos="12..41">Boilerplate for tracking apps</span>" <span md-src-pos="43..49">author</span>: "<span md-src-pos="52..69">Francesco Pirotti</span>" <span md-src-pos="71..75">date</span>: "<span md-src-pos="78..88">2023-02-05</span>"</p>
   <hr>
   <h1 id="boilerplate-for-tracking-apps" md-src-pos="97..128">Boilerplate for tracking apps</h1>
   <p md-src-pos="130..238"><span md-src-pos="130..187">A tracking app in javascript with several advantages with</span> <span md-src-pos="189..220">respect to alternatives in JAVA</span> <span md-src-pos="221..222">/</span> <span md-src-pos="223..238">Android Studio.</span></p>
   <p md-src-pos="240..302"><a href="&quot;https://www.cirgeo.unipd.it/varcities/index.html&quot;" md-src-pos="240..302">GOTO APP</a></p>
   <p md-src-pos="304..315"><span md-src-pos="304..314">Advantages</span>:</p>
   <ul md-src-pos="317..498">
    <li md-src-pos="317..346">it is quite cross-platform</li>
    <li md-src-pos="347..365">easy to install</li>
    <li md-src-pos="366..430">does not require to connect to Google Play or APKs to install</li>
    <li md-src-pos="431..498">works offline by caching a very small footprint of location data</li>
   </ul>
   <p md-src-pos="500..514"><span md-src-pos="500..513">Disadvantages</span>:</p>
   <ul md-src-pos="516..830">
    <li md-src-pos="516..563">less robust when missing internet connection</li>
    <li md-src-pos="564..830">if user shuts off the screen, coordinates are not recorded anymore - depending on the browser the APP will try to disable the screen sleeping mode, but if the user proactively shuts off the screen, the coordinates are not recorded anymore, thus data are lost.</li>
   </ul>
   <h2 id="usage" md-src-pos="833..841">Usage</h2>
   <p md-src-pos="843..1024"><span md-src-pos="843..887">Simple start tracking by clicking the button</span> <span md-src-pos="888..889">-</span> <span md-src-pos="890..897">you can</span> <span md-src-pos="899..955">stop by long-pressing the button for at least 2 seconds.</span> <span md-src-pos="956..960">This</span> <span md-src-pos="961..1024">avoids stopping by mistake the tracking by touching the button.</span></p>
   <p md-src-pos="1026..1112"><mark><span md-src-pos="1032..1034">NB</span> <span md-src-pos="1035..1036">-</span> <span md-src-pos="1037..1088">you must keep the app and screen on to successfully</span> <span md-src-pos="1090..1105">record the data</span></mark></p>
   <p md-src-pos="1114..1292"><span md-src-pos="1114..1142">Upon stopping the recording,</span> <span md-src-pos="1143..1182">your data will be saved to the phone as</span> <span md-src-pos="1183..1193">compressed</span> (<span md-src-pos="1195..1198">ZIP</span>) <span md-src-pos="1200..1215">GeoJSON format.</span> <span md-src-pos="1216..1242">You can share this file to</span> <span md-src-pos="1244..1290">a PC or other devices by going to the download</span> <span md-src-pos="1291..1292">.</span></p>
   <h2 id="short-description" md-src-pos="1294..1314">Short description</h2>
   <p md-src-pos="1316..1423"><span md-src-pos="1316..1385">It is based on PWA so it can be installed as an APP in the smartphone</span> <span md-src-pos="1387..1423">and run without internet connection.</span></p>
   <p md-src-pos="1425..1510"><span md-src-pos="1425..1475">It allows catching coordinates around every second</span>* (<span md-src-pos="1478..1486">tracking</span>) <span md-src-pos="1489..1510">and geotagged images.</span></p>
   <p md-src-pos="1512..1598"><span md-src-pos="1512..1547">Tracking will send data to a server</span> <span md-src-pos="1549..1561">in real-time</span> <span md-src-pos="1563..1598">if there is an internet connection.</span></p>
   <p md-src-pos="1600..1724"><span md-src-pos="1600..1672">The app will save the positions into the phone and save the final track</span> <span md-src-pos="1674..1723">as geoJSON in the phone once tracking is stopped.</span></p>
   <p md-src-pos="1726..1963"><span md-src-pos="1726..1772">The saved file is in compressed GeoJSON format</span> (<span md-src-pos="1774..1777">zip</span>)<span md-src-pos="1778..1779">.</span> <span md-src-pos="1781..1837">The phone apps can open the GeoJSON with QField or other</span> <span md-src-pos="1838..1873">GIS apps that recognize the format.</span> <span md-src-pos="1874..1911">The zipped GeoJSON file can be shared</span> <span md-src-pos="1913..1962">via email or social media for easy data transfer.</span></p>
   <p md-src-pos="1965..2166"><span md-src-pos="1965..2006">The locations are synced with the server.</span> <span md-src-pos="2007..2021">Each phone/app</span> <span md-src-pos="2023..2039">has a unique ID.</span> <span md-src-pos="2040..2059">NB the unique ID is</span> <span md-src-pos="2061..2111">a 10 character random hash created from the client</span> <span md-src-pos="2113..2121">browser,</span> <strong md-src-pos="2122..2165">it is NOT the phone ID or a fingerprint</strong><span md-src-pos="2165..2166">.</span></p>
   <p md-src-pos="2168..2408"><span md-src-pos="2168..2209">The app must be active to track location.</span> <span md-src-pos="2211..2261">For this the screen is locked to avoid sleep mode,</span> <span md-src-pos="2262..2298">but if the user changes page or app,</span> <span md-src-pos="2299..2323">the recording will stop.</span> <span md-src-pos="2324..2340">Because of this,</span> <span md-src-pos="2341..2383">the app has a minimal battery footprint to</span> <span md-src-pos="2385..2408">minimize battery usage.</span></p>
   <h3 id="photoes" md-src-pos="2410..2421">Photoes</h3>
   <p md-src-pos="2423..2607"><span md-src-pos="2423..2474">User can snap new photos or upload existing photos,</span> <span md-src-pos="2475..2534">the APP will double-check that they are GeoTagged correctly</span> <span md-src-pos="2535..2591">and provide alerts in case your camera is not enabled to</span> <span md-src-pos="2593..2607">geotag images.</span></p>
   <p md-src-pos="2609..2805"><em md-src-pos="2609..2805">TBD - The photo will be uploaded to the server if there is internet connection, otherwise it will be cached and synced the next time that the APP is started and internet connection is detected.</em></p>
   <h3 id="other-technical-info" md-src-pos="2807..2831">Other technical info</h3>
   <p md-src-pos="2833..3024"><span md-src-pos="2833..2856">For maximum efficiency,</span> <span md-src-pos="2857..2894">data is transferred over the internet</span> <span md-src-pos="2895..2917">as tiny binary arrays.</span> <span md-src-pos="2918..2955">Tracking data are transferred as four</span> <span md-src-pos="2956..2989">32bit unsigned 32 bits integers,</span> <span md-src-pos="2990..3004">with a header,</span> <span md-src-pos="3005..3023">as described below</span>:</p>
   <ul md-src-pos="3026..3461">
    <li md-src-pos="3026..3159"><strong md-src-pos="3028..3038">HEADER</strong>
     <ul md-src-pos="3041..3159">
      <li md-src-pos="3041..3113"><strong md-src-pos="3043..3050">UID</strong> Unique ID of device - string with 10 characters <em md-src-pos="3099..3113">(10x1 Bytes)</em></li>
      <li md-src-pos="3116..3159"><strong md-src-pos="3118..3132">Start Time</strong> BigInt64bits <em md-src-pos="3146..3159">(1x8 Bytes)</em></li>
     </ul></li>
    <li md-src-pos="3160..3461"><strong md-src-pos="3162..3170">DATA</strong>
     <ul md-src-pos="3173..3461">
      <li md-src-pos="3173..3253"><strong md-src-pos="3175..3188">timestamp</strong> in milliseconds from start of recording, in INT32 <em md-src-pos="3240..3253">(1x4 Bytes)</em></li>
      <li md-src-pos="3256..3393"><strong md-src-pos="3258..3270">latitude</strong> and <strong md-src-pos="3275..3288">longitude</strong> are multiplied by 10000000 (1E7) to keep submetric resolution on the INT32 integer size <em md-src-pos="3380..3393">(2x4 Bytes)</em></li>
      <li md-src-pos="3396..3461"><strong md-src-pos="3398..3410">accuracy</strong> resolution is stored in centimeters <em md-src-pos="3448..3461">(1x4 Bytes)</em></li>
     </ul></li>
   </ul>
   <p md-src-pos="3463..3552"><span md-src-pos="3463..3508">The header is used to fix the file name using</span> <span md-src-pos="3509..3529">the following format</span>: <span md-src-pos="3532..3551">YYYYMMDD_HHmmSS.bin</span></p>
   <p md-src-pos="3554..3788"><strong md-src-pos="3554..3566">Example:</strong> <span md-src-pos="3568..3589">a track started at 10</span>:<span md-src-pos="3590..3592">01</span>:<span md-src-pos="3593..3595">45</span> <span md-src-pos="3597..3625">on the 30th of February 2022</span> <span md-src-pos="3627..3636">on device</span> "<em md-src-pos="3638..3650">xxxaaa111b</em>" <span md-src-pos="3652..3656">will</span> <span md-src-pos="3658..3676">be saved in folder</span> <em md-src-pos="3677..3689">xxxaaa111b</em> <span md-src-pos="3690..3697">in file</span> <em md-src-pos="3699..3720">20221230_100145.bin</em> <span md-src-pos="3721..3756">and data will be a raw array of the</span> <strong md-src-pos="3757..3765">DATA</strong> <span md-src-pos="3766..3788">chunk described above.</span></p>
  </div>
 </body>
</html>